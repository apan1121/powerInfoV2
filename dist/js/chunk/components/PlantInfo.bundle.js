(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{106:function(t,a,s){"use strict";(function(t){var e=s(3),i=s(15),n=s(2);a.a={components:{PlantInfo:()=>s.e(3).then(s.bind(null,537))},filters:{formatMoney:t=>t.toLocaleString()},mixins:[i.a],props:{plantName:{type:String,default:""}},data:()=>({tabs:{basicInfo:"基本資料",UnitsInfo:"機組資料"},chooseTab:"basicInfo",UnitsCount:0,TotalCapacity:0,TotalUsed:0,UnitFixed:0,UnitLimit:0,UnitBreak:0}),computed:{...Object(e.c)(["lang","adBlocked","MappingPlantList","FormatUnits"]),Units(){return Object.values(JSON.parse(JSON.stringify(this.FormatUnits)))},plantInfo(){const t=JSON.parse(JSON.stringify(this.MappingPlantList));let{Units:a}=this;const{plantName:s}=this;let e=!1;return t[s]&&(e=t[s],a=a.filter(t=>t.mappingName.includes(e.nickName)),e.units=a),e}},watch:{name:{immediate:!0,handler(){}},chooseTab:{immediate:!0,handler(){t("body").trigger("resizeImg")}},plantInfo:{immediate:!0,deep:!0,handler(t){}}},created(){},mounted(){const a=this;a.chooseTab="basicInfo",t(a.$el).on("shown.bs.modal",()=>{n.f.gtag("event","PlantInfoBox_open",{name:this.plantInfo.name}),n.f.mixpanel("PlantInfoBox_open",{name:this.name})}),t(a.$el).on("hidden.bs.modal",()=>{this.$route.query&&this.$route.query.plant_name&&this.$router.push({name:"UnitPage"}),n.f.gtag("event","PlantInfoBox_close",{name:this.name}),n.f.mixpanel("PlantInfoBox_close",{name:this.name}),a.$emit("close")}),t(".modal").modal("hide"),t(this.$el).modal("show"),setTimeout(()=>{(window.adsbygoogle=window.adsbygoogle||[]).push({})},500)},updated(){},destroyed(){},methods:{...Object(e.b)({}),...Object(e.d)({})}}}).call(this,s(16))},113:function(t,a,s){"use strict";(function(t){var e=s(3),i=s(15);s(2);a.a={components:{UnitBox:()=>Promise.all([s.e(5),s.e(0),s.e(8)]).then(s.bind(null,536))},filters:{formatMoney:t=>t.toLocaleString()},mixins:[i.a],props:{chooseTab:{type:String,default:"basicInfo"},name:{type:String,default:""},url:{type:String,default:""},fullName:{type:String,default:""},nickName:{type:String,default:""},photo:{type:String,default:""},location:{type:String,default:""},geo:{type:[Object,Boolean],default:!1},org:{type:String,default:""},amount:{type:[Number,String],default:""},capacity:{type:[Number,String],default:""},status:{type:String,default:""},note:{type:String,default:""},type:{type:Array,default:()=>[]},units:{type:Array,default:()=>[]}},data:()=>({tabs:{basicInfo:"基本資料",UnitsInfo:"機組資料"},TotalCapacity:0,TotalUsed:0,UnitFixed:0,UnitLimit:0,UnitBreak:0}),computed:{...Object(e.c)(["lang","adBlocked"]),usedPercent(){let t=0;return 0!==this.TotalCapacity&&(t=this.TotalUsed/this.TotalCapacity*100),t=t.toFixed(2),t},usedPercentColor(){const t=this.usedPercent+0;let a="";return a=t>90?"label-danger":t>80?"label-warning":0===t?"label-default":t<0?"label-info":"label-success",a}},watch:{name:{immediate:!0,handler(){this.setSEO()}},chooseTab:{immediate:!0,handler(){t("body").trigger("resizeImg")}},units:{immediate:!0,deep:!0,handler(){this.calc()}}},created(){},mounted(){setTimeout(()=>{(window.adsbygoogle=window.adsbygoogle||[]).push({})},500)},updated(){},destroyed(){this.undoPageTitle()},methods:{...Object(e.b)({}),...Object(e.d)({}),setSEO(){const t=this;clearTimeout(t.setSEOTimer),t.setSEOTimer=setTimeout(()=>{const{fullName:a,org:s,amount:e}=t;let{capacity:i,status:n}=t;const l=t.type.map(a=>t.lang.type[a]).join("、");i=i.toLocaleString(),n=t.lang.status[n],t.setPageSEO({title:""+t.fullName,description:`${a}為${s}的${l}電廠，擁有${e}台發電機組，目前狀態${n}總發電量為${i}MW。`})},200)},calc(){let t=0,a=0,s=0,e=0,i=0;this.units.forEach(n=>{switch(n.orgStatus){case"fix":s+=n.capacity;break;case"break":i+=n.capacity;break;case"limit":e+=n.capacity;break;case"online":t+=n.capacity,a+=n.used}}),this.TotalUsed=a,this.TotalCapacity=t,this.UnitFixed=s,this.UnitLimit=e,this.UnitBreak=i}}}}).call(this,s(16))},390:function(t,a,s){"use strict";var e=function(){var t=this,a=t._self._c;return a("div",{staticClass:"modal fade",attrs:{id:"plant-info-box",tabindex:"-1",role:"dialog","aria-labelledby":"plantInfoBox","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("\n                    電廠介紹\n                    "),a("ul",{staticClass:"nav nav-pills"},[t._l(t.tabs,(function(s,e){return[a("li",{key:e,staticClass:"nav-item"},[a("a",{staticClass:"nav-link",class:{active:e===t.chooseTab,disabled:"UnitsInfo"===t.chooseTab&&0===t.Units.length},attrs:{href:"javascript:;"},domProps:{textContent:t._s(s)},on:{click:function(a){t.chooseTab=e}}})])]}))],2)]),t._v(" "),t._m(0)]),t._v(" "),a("div",{staticClass:"modal-body"},[t.plantInfo?a("plant-info",t._b({attrs:{"choose-tab":t.chooseTab}},"plant-info",t.plantInfo,!1)):t._e()],1)])])])};e._withStripped=!0;var i=s(106).a,n=s(4),l=Object(n.a)(i,e,[function(){var t=this._self._c;return t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}],!1,null,"3c5774be",null);a.a=l.exports},537:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t._self._c;return a("div",["basicInfo"===t.chooseTab?a("div",{key:t.chooseTab,staticClass:"plant-base-content"},[a("div",{staticClass:"plant-photo mb-2",style:{"background-size":"cover","background-position":"center center","background-repeat":"no-repeat","background-image":`url(${t.photo})`}}),t._v(" "),a("div",{staticClass:"row table-base-info"},[a("div",{staticClass:"col-12 col-md-6 item"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4 key"},[t._v("\n                        全名\n                    ")]),t._v(" "),a("div",{staticClass:"col-8 value"},[t._v("\n                        "+t._s(t.fullName)+"\n                        "),t.url?[a("small",[a("a",{attrs:{href:t.url,target:"_blank",title:"wiki"}},[a("i",{staticClass:"fab fa-wikipedia-w"})])])]:t._e()],2)])]),t._v(" "),a("div",{staticClass:"col-12 col-md-6 item"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4 key"},[t._v("\n                        別稱\n                    ")]),t._v(" "),a("div",{staticClass:"col-8 value"},[t._v("\n                        "+t._s(t.name)+"\n                        "),t.nickName?[a("small",[t._v("("+t._s(t.nickName)+")")])]:t._e()],2)])]),t._v(" "),a("div",{staticClass:"col-12 col-md-6 item"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4 key"},[t._v("\n                        所在縣市\n                    ")]),t._v(" "),a("div",{staticClass:"col-8 value"},[t._v("\n                        "+t._s(t.location)+"\n                        "),t.geo?a("small",[a("a",{attrs:{href:`https://www.google.com/maps/?q=${t.geo.lat},${t.geo.lng}`,target:"_blank"}},[a("i",{staticClass:"fas fa-map-marker-alt"})])]):t._e()])])]),t._v(" "),a("div",{staticClass:"col-12 col-md-6 item"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4 key"},[t._v("\n                        所屬單位\n                    ")]),t._v(" "),a("div",{staticClass:"col-8 value"},[t._v("\n                        "+t._s(t.org)+"\n                    ")])])]),t._v(" "),a("div",{staticClass:"col-12 col-md-6 item"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4 key"},[t._v("\n                        機組數量\n                    ")]),t._v(" "),a("div",{staticClass:"col-8 value"},[t._v("\n                        "+t._s(t.amount)+"\n                    ")])])]),t._v(" "),a("div",{staticClass:"col-12 col-md-6 item"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4 key"},[t._v("\n                        總發電量\n                    ")]),t._v(" "),a("div",{staticClass:"col-8 value"},[t._v("\n                        "+t._s(t._f("formatMoney")(t.capacity))+" "),a("small",[t._v("MW")])])])]),t._v(" "),a("div",{staticClass:"col-12 col-md-6 item"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4 key"},[t._v("\n                        狀態\n                    ")]),t._v(" "),a("div",{staticClass:"col-8 value"},[t._v("\n                        "+t._s(t.lang.status[t.status])+"\n                    ")])])]),t._v(" "),a("div",{staticClass:"col-12 col-md-6 item"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4 key"},[t._v("\n                        發電總類\n                    ")]),t._v(" "),a("div",{staticClass:"col-8 value"},[t._l(t.type,(function(s,e){return[a("span",{key:e,staticClass:"power-type",domProps:{textContent:t._s(t.lang.type[s])}})]}))],2)])]),t._v(" "),a("div",{staticClass:"col-12 item"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4 col-md-2 key"},[t._v("\n                        備註\n                    ")]),t._v(" "),a("div",{staticClass:"col-8 col-md-10 value"},[t._v("\n                        "+t._s(t.note)+"\n                    ")])])])])]):t._e(),t._v(" "),"UnitsInfo"===t.chooseTab?a("div",{key:t.chooseTab,staticClass:"plant-units-content"},[a("div",{staticClass:"unit-group-info"},[t._v("\n            發電量(已/可)：\n            "+t._s(t._f("formatMoney")(t.TotalUsed))+" "),a("small",[t._v("MW")]),t._v("\n            /\n            "+t._s(t._f("formatMoney")(t.TotalCapacity))+" "),a("small",[t._v("MW")]),t._v(" "),a("span",{staticClass:"label",class:t.usedPercentColor},[t._v("\n                "+t._s(t.usedPercent)+"\n                "),a("small",[t._v("%")])])]),t._v(" "),a("div",{staticClass:"unit-group-info"},[t.UnitFixed>0?a("div",{staticClass:"unit-group-label",attrs:{rel:"fix"}},[t._v("\n                待修機組： "+t._s(t._f("formatMoney")(t.UnitFixed))+" "),a("small",[t._v("MW")])]):t._e(),t._v(" "),t.UnitBreak>0?a("div",{staticClass:"unit-group-label",attrs:{rel:"break"}},[t._v("\n                故障機組： "+t._s(t._f("formatMoney")(t.UnitBreak))+" "),a("small",[t._v("MW")])]):t._e(),t._v(" "),t.UnitLimit>0?a("div",{staticClass:"unit-group-label",attrs:{rel:"limit"}},[t._v("\n                限轉機組： "+t._s(t._f("formatMoney")(t.UnitLimit))+" "),a("small",[t._v("MW")])]):t._e()]),t._v(" "),t.units.length>0?a("div",{staticClass:"row"},[t._l(t.units,(function(s,e){return[a("div",{key:`plant-unit-${t.fullName}-${e}`,staticClass:"col-6 text-center"},[a("unit-box",{attrs:{"unit-key":s.key,name:s.name,"org-type":s.orgType,"org-status":s.orgStatus,"plant-name":s.plantName,"plant-full-name":s.plantFullName,used:s.used,capacity:s.capacity,"show-plant-full-name":!1}})],1)]}))],2):t._e()]):t._e()])};e._withStripped=!0;var i=s(113).a,n=s(4),l=Object(n.a)(i,e,[],!1,null,"7910b552",null);a.default=l.exports},546:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t._self._c;return a("div",{staticStyle:{margin:"0 auto","max-width":"500px"},attrs:{id:"plant-info-box"}},[a("ul",{staticClass:"nav nav-pills mb-3"},[t._l(t.tabs,(function(s,e){return[a("li",{key:e,staticClass:"nav-item"},[a("a",{staticClass:"nav-link",class:{active:e===t.chooseTab,disabled:"UnitsInfo"===t.chooseTab&&0===t.Units.length},attrs:{href:"javascript:;"},domProps:{textContent:t._s(s)},on:{click:function(a){t.chooseTab=e}}})])]}))],2),t._v(" "),t.plantInfo?a("plant-info",t._b({attrs:{"choose-tab":t.chooseTab}},"plant-info",t.plantInfo,!1)):t._e()],1)};e._withStripped=!0;var i=s(3),n=s(15),l=s(2);l.b.register([{rel:"stylesheet",type:"text/css",href:"/dist/css/page/unit-page.css"}]);var o={components:{PlantInfo:()=>s.e(3).then(s.bind(null,537))},filters:{},mixins:[n.a],props:{},data:()=>({tabs:{basicInfo:"基本資料",UnitsInfo:"機組資料"},chooseTab:"basicInfo"}),computed:{...Object(i.c)(["lang","MappingPlantList","FormatUnits"]),plantName(){let t="";return this.$route.params&&this.$route.params.plant_name&&(t=this.$route.params.plant_name),t},Units(){return Object.values(JSON.parse(JSON.stringify(this.FormatUnits)))},plantInfo(){const t=JSON.parse(JSON.stringify(this.MappingPlantList));let{Units:a}=this;const{plantName:s}=this;let e=!1;return t[s]&&(e=t[s],a=a.filter(t=>t.mappingName.includes(e.nickName)),e.units=a),e}},watch:{},created(){},mounted(){this.chooseTab="basicInfo",this.init()},updated(){},destroyed(){},methods:{...Object(i.b)({}),...Object(i.d)({}),init(){this.loadPlantInfo()},loadPlantInfo(){const t=this;l.d.loading({title:"讀取中"}),t.$store.dispatch("getPlantInfo").then(a=>{t.loadPowerInfo()},()=>{l.d.close()})},loadPowerInfo(){l.d.loading({title:"讀取中"}),this.$store.dispatch("getRealTimePowerInfo").then(t=>{l.d.close()},()=>{l.d.close()})}}},c=s(4),r=Object(c.a)(o,e,[],!1,null,"5c7e3366",null);a.default=r.exports}}]);