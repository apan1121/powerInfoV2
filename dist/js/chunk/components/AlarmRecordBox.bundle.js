(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{116:function(t,e,s){"use strict";(function(t){var a=s(0),l=s.n(a),o=s(3),n=s(170),i=s.n(n);e.a={components:{CardBox:()=>s.e(2).then(s.bind(null,173)),VuePerfectScrollbar:i()},filters:{},props:{DIFF_TOTAL_USED_LIMIT:{type:Number,default:0},time:{type:String,default:""},diff_used:{type:Number,default:0},diff_records:{type:Object,default:()=>{}},reduce_records:{type:Array,default:()=>[]},defaultOpen:{type:[Boolean,null],default:null}},data:()=>({fullscreenToggle:!1}),computed:{...Object(o.c)({lang:"lang",adBlocked:"adBlocked"}),reduceRecords(){const t=this;let e=[];return t.reduce_records.forEach(s=>{const a=s.newVal-s.oldVal;let l=0;0!==s.oldVal&&(l=parseInt(a/s.oldVal*1e4)/100),e.push({...s,diff:a,percent:t.formatMoney(Math.abs(l))})}),e=e.sort((t,e)=>t.diff>e.diff?1:t.diff===e.diff?0:-1),e},diffTypes(){const[t,e]=Object.keys(JSON.parse(JSON.stringify(this.diff_records))),[s,a]=Object.values(JSON.parse(JSON.stringify(this.diff_records)));let o=[];return Object.keys(this.lang.type).forEach(n=>{const i=parseFloat(s[n].used),d=parseFloat(a[n].used),c=d-i;let r=0;0!==i&&(r=parseInt(c/i*1e4)/100),0!==c&&o.push({lastTime:l()(t).format("HH:mm"),nowTime:l()(e).format("HH:mm"),type:n,last:i,now:d,diff:c,percent:r})}),o=o.sort((t,e)=>t.diff>e.diff?1:t.diff===e.diff?0:-1),o}},watch:{fullscreenToggle(e){e?(setTimeout(()=>{(window.adsbygoogle=window.adsbygoogle||[]).push({})},500),t("body").addClass("lock-scroll")):t("body").removeClass("lock-scroll")}},created(){},mounted(){},updated(){},destroyed(){},methods:{...Object(o.b)({}),...Object(o.d)({chooseUnitByKey:"chooseUnitByKey"}),openUnitInfo(t){this.chooseUnitByKey(t.unitKey)},formatMoney:t=>t.toLocaleString(),unitInfoPath(t){const e=document.createElement("a");return e.href=window.location.href,e.hash="",e.query="",e.href=e.href+"?path="+encodeURIComponent("unit/"+t.unitKey),e.href},fullscreen(){this.fullscreenToggle=!this.fullscreenToggle}}}}).call(this,s(16))},552:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("card-box",{class:{fullscreen:t.fullscreenToggle},attrs:{title:`${t.time} 減少 ${t.formatMoney(-1*t.diff_used)} <small>MW</small>`,"default-open":t.defaultOpen},on:{fullscreen:t.fullscreen}},[e("vue-perfect-scrollbar",{staticClass:"scroll-area"},[e("div",{staticClass:"row mb-4"},[e("div",{staticClass:"col-12 mb-2"},[e("h4",[t._v("發電狀態")])]),t._v(" "),t._l(t.diffTypes,(function(s,a){return[e("div",{key:a,staticClass:"col-6 col-md-4 col-lg-3 col-xl-2 text-center"},[e("div",{staticClass:"diff-type-box"},[e("div",{staticClass:"diff-type-icon"},[e("div",{staticClass:"icon",class:"icon-"+s.type.replace(/\s/gi,"_").replace("-","_")})]),t._v(" "),e("h5",{staticClass:"diff-type-title",domProps:{textContent:t._s(t.lang.type[s.type])}}),t._v(" "),e("div",{staticClass:"diff-power",attrs:{rel:s.diff>0?"up":"down"}},[e("span",{staticClass:"icon",domProps:{textContent:t._s(s.diff>0?"▲":"▼")}}),t._v(" "),e("span",{staticClass:"info"},[t._v(t._s(t.formatMoney(Math.abs(s.diff)))+"\n                                "),e("small",[t._v("MW")]),t._v(" "),e("small",[t._v("("+t._s(t.formatMoney(s.percent))+" "),e("small",[t._v("%")]),t._v(")")])])]),t._v(" "),e("div",{staticClass:"diff-date"},[e("div",{staticClass:"date-item"},[e("div",{staticClass:"date-title"},[t._v("\n                                    "+t._s(s.nowTime)+"\n                                ")]),t._v(" "),e("div",{staticClass:"date-value"},[t._v("\n                                    "+t._s(s.now)+" "),e("small",[t._v("MW")])])]),t._v(" "),e("div",{staticClass:"date-item"},[e("div",{staticClass:"date-title"},[t._v("\n                                    "+t._s(s.lastTime)+"\n                                ")]),t._v(" "),e("div",{staticClass:"date-value"},[t._v("\n                                    "+t._s(s.last)+" "),e("small",[t._v("MW")])])])])])])]}))],2),t._v(" "),t.fullscreenToggle?[e("div",{ref:"ads",staticClass:"power-info-promote",class:{"ad-blocked":t.adBlocked}},[e("ins",{staticClass:"adsbygoogle",staticStyle:{display:"block"},attrs:{"data-ad-format":"fluid","data-ad-layout-key":"-fb+5w+4e-db+86","data-ad-client":"ca-pub-3068501078221920","data-ad-slot":"1897408904"}})])]:t._e(),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 mb-2"},[e("h4",[t._v("可能異常裝置")])]),t._v(" "),t._l(t.reduceRecords,(function(s,a){return[e("div",{key:a,staticClass:"col-12 col-md-6"},[e("div",{staticClass:"abnormal-box"},[e("span",{staticClass:"name"},[t._v(t._s(s.name)+"("+t._s(t.lang.type[s.type])+")")]),t._v("\n                        降載 "),e("span",[t._v(t._s(t.formatMoney(Math.abs(s.diff)))+" "),e("small",[t._v("MW")])]),t._v("\n                        約 "),e("span",[t._v(t._s(s.percent)+" "),e("small",[t._v("%")])]),t._v(" "),e("a",{staticClass:"now-unit-info",attrs:{href:t.unitInfoPath(s)},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.openUnitInfo(s)}}},[t._v("查看目前狀態")])])])]}))],2)],2)],1)};a._withStripped=!0;var l=s(116).a,o=s(4),n=Object(o.a)(l,a,[],!1,null,"358fbf41",null);e.default=n.exports}}]);