(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{112:function(t,e,o){"use strict";(function(t){var s=o(168),i=o(169),n=o.n(i),a=o(3),r=o(2);e.a={components:{ToggleButton:s.ToggleButton,draggable:n()},filters:{},props:{type:{type:Boolean,default:!0},sort:{type:Boolean,default:!0}},data:()=>({inputChooseTypes:{},inputSortGroup:[],inputShowVal:"",chooseSortGroup:"",showValSelect:{used:"已發電量",capacity:"裝置容量"}}),computed:{...Object(a.c)({lang:"lang",chooseTypes:"chooseTypes",sortGroup:"sortGroup",showVal:"showVal"}),UnitTypes(){return this.lang.type},SortNames(){return this.lang.sortNames},SortSelect(){const t={};for(const e in this.lang.sortNames)this.inputSortGroup.includes(e)||(t[e]=this.lang.sortNames[e]);return t},canSave(){const t=this;let e=!1;if(t.type){const o=JSON.stringify(t.inputChooseTypes);let s={};Object.keys(t.UnitTypes).forEach(e=>{s[e]=t.chooseTypes.includes(e)}),s=JSON.stringify(s),o!==s&&(e=!0)}if(t.sort){JSON.stringify(t.sortGroup)!==JSON.stringify(t.inputSortGroup)&&(e=!0),t.inputShowVal!==t.showVal&&(e=!0)}return e}},watch:{},created(){},mounted(){const e=this;e.init(),t(".modal").modal("hide"),t(e.$el).modal("show"),t(e.$el).on("shown.bs.modal",()=>{r.f.gtag("event","UnitFilterBox_open",{}),r.f.mixpanel("UnitFilterBox_open",{})}),t(e.$el).on("hidden.bs.modal",()=>{e.$emit("open-filter-box",!1),r.f.gtag("event","UnitFilterBox_close",{}),r.f.mixpanel("UnitFilterBox_close",{})})},updated(){},destroyed(){},methods:{...Object(a.b)({}),...Object(a.d)({SetChooseTypes:"SetChooseTypes",SetSortGroup:"SetSortGroup",SetShowVal:"SetShowVal"}),init(){const t=this;if(t.type){const e={};Object.keys(t.UnitTypes).forEach(o=>{e[o]=t.chooseTypes.includes(o)}),t.inputChooseTypes=e}t.sort&&(t.inputSortGroup=JSON.parse(JSON.stringify(t.sortGroup)),t.inputShowVal=t.showVal)},save(){const e=this,o={};if(e.type){const t=[];for(const o in e.inputChooseTypes)!0===e.inputChooseTypes[o]&&t.push(o);o.chooseTypes=t,e.SetChooseTypes(t)}if(e.sort){const t=JSON.parse(JSON.stringify(e.inputSortGroup));e.SetSortGroup(t);const s=JSON.parse(JSON.stringify(e.inputShowVal));e.SetShowVal(s),o.sortGroup=t,o.showVal=s}r.f.gtag("event","UnitFilterBox_save",o),r.f.mixpanel("UnitFilterBox_save",o),t(e.$el).modal("hide")},addSortGroup(){const t=this;if(t.chooseSortGroup){const e=JSON.parse(JSON.stringify(t.inputSortGroup));e.push(t.chooseSortGroup),t.inputSortGroup=e,t.chooseSortGroup=""}},removeSortGroup(t){const e=JSON.parse(JSON.stringify(this.inputSortGroup)),o=e.indexOf(t);-1!==o&&e.splice(o,1),this.inputSortGroup=e}}}}).call(this,o(16))},550:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal fade",attrs:{id:"unit-filter-box",tabindex:"-1",role:"dialog","aria-labelledby":"unitFilterBox","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),e("div",{staticClass:"modal-body"},[t.type?e("fieldset",[e("legend",[t._v("發電類型：")]),t._v(" "),e("div",{staticClass:"row"},[t._l(t.UnitTypes,(function(o,s){return[e("div",{key:"uint-filter-type-"+s,staticClass:"col-6 col-md-4 text-center"},[e("toggle-button",{attrs:{color:"#82C7EB",sync:!0,value:!0,labels:{checked:o,unchecked:o},"font-size":16,width:120,height:40},model:{value:t.inputChooseTypes[s],callback:function(e){t.$set(t.inputChooseTypes,s,e)},expression:"inputChooseTypes[key]"}})],1)]}))],2)]):t._e(),t._v(" "),t.type&&t.sort?e("hr"):t._e(),t._v(" "),t.sort?e("fieldset",[e("legend",[t._v("排序方式：")]),t._v(" "),e("draggable",{staticClass:"row mb-3",attrs:{list:t.inputSortGroup,handle:".handle","ghost-class":"ghost"}},[t._l(t.inputSortGroup,(function(o){return[e("div",{key:o,staticClass:"col-12"},[e("div",{staticClass:"input-group mb-3"},[e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text handle",staticStyle:{cursor:"pointer"}},[e("i",{staticClass:"fas fa-bars"})])]),t._v(" "),e("div",{staticClass:"form-control",domProps:{textContent:t._s(t.SortNames[o])}}),t._v(" "),t.inputSortGroup.length>1?e("div",{staticClass:"input-group-append"},[e("span",{staticClass:"input-group-text",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.removeSortGroup(o)}}},[e("i",{staticClass:"fas fa-trash-alt"})])]):t._e()])])]}))],2),t._v(" "),Object.keys(t.SortSelect).length>0?e("div",{staticClass:"input-group mb-3"},[t._m(1),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.chooseSortGroup,expression:"chooseSortGroup"}],staticClass:"form-control",on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.chooseSortGroup=e.target.multiple?o:o[0]}}},[e("option",{attrs:{value:""}},[t._v("\n                                選取\n                            ")]),t._v(" "),t._l(t.SortSelect,(function(o,s){return[e("option",{key:s,domProps:{value:s,textContent:t._s(o)}})]}))],2),t._v(" "),t.chooseSortGroup?e("div",{staticClass:"input-group-append"},[e("span",{staticClass:"input-group-text",staticStyle:{cursor:"pointer"},on:{click:t.addSortGroup}},[e("i",{staticClass:"fas fa-plus"})])]):t._e()]):t._e(),t._v(" "),e("div",{staticClass:"input-group mb-3"},[t._m(2),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.inputShowVal,expression:"inputShowVal"}],staticClass:"form-control",on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.inputShowVal=e.target.multiple?o:o[0]}}},[t._l(t.showValSelect,(function(o,s){return[e("option",{key:s,domProps:{value:s,textContent:t._s(o)}})]}))],2)])],1):t._e()]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-success",attrs:{type:"button",disabled:!t.canSave},on:{click:t.save}},[t._v("\n                    設定條件\n                ")])])])])])};s._withStripped=!0;var i=o(112).a,n=o(4),a=Object(n.a)(i,s,[function(){var t=this._self._c;return t("div",{staticClass:"modal-header"},[t("h5",{staticClass:"modal-title"},[this._v("\n                    過濾條件\n                ")]),this._v(" "),t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var t=this._self._c;return t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text handle",staticStyle:{cursor:"pointer"}},[this._v("\n                                新增排序\n                            ")])])},function(){var t=this._self._c;return t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text handle",staticStyle:{cursor:"pointer"}},[this._v("\n                                顯示電量\n                            ")])])}],!1,null,"115ddacc",null);e.default=a.exports}}]);